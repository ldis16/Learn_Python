import random

def main() -> None:
    play(get_word())

def play(word: str):
    word_completion = '_' * len(word)  # строка, содержащая символы _ на каждую букву задуманного слова
    guessed = False                    # сигнальная метка
    guessed_letters = []               # список уже названных букв
    guessed_words = []                 # список уже названных слов
    tries = 6                          # количество попыток

    print("Давайте играть в угадайку слов!")
    print(word)
    display_hangman(tries)
    print(*word_completion)

    while not guessed and tries > 0:
        print("Пожалуйста введите букву или слово целиком")
        start_tries = tries
        message = ""
        reply = input().upper()
        if is_valid_reply(reply, word):
            if len(reply) == 1:
                if reply in guessed_letters:
                    message = "Ты уже вводил эту букву"
                else:
                    guessed_letters.append(reply)
                    if reply in word:
                        message = "ты угадал букву"
                        word_completion = update_word_completion(reply, word, word_completion)
                    else:
                        tries -= 1
                        message = f"Ты не угадал букву. Кол-во оставшихся попыток: {tries}"
            else:
                if reply in guessed_words:
                    message = "Ты уже вводил данное слово"
                else:
                    guessed_words.append(reply)
                    if reply == word:
                        guessed = True
                        word_completion = reply
                        message = "Поздравляем, вы угадали слово! Вы победили!"
                    else:
                        tries -= 1
                        message = f"Ты не угадал слово. Кол-во оставшихся попыток: {tries}" 
        else:
            message = "Некоректный символ или слово больше или содержит неверные символы, попробуй ещё"
        print(message)
        if start_tries != tries:
            print(display_hangman(tries))
        print(word_completion)
    
    if not guessed:
        print("К сожалению ты не угадал слово")
        print(f"Загаданное слово было: {word}")
        

def update_word_completion(reply: str, word: str, word_completion: str) -> str:
    result = ""
    for i in range(len(word)):
        char = word[i]
        if reply == char:
            result += char
        else:
            result += word_completion[i]
    return result

def is_valid_reply(reply: str, word: str) -> bool:
    return reply.isalpha() and len(reply) <= len(word)

def get_word() -> str:
    words = [
"дом","лес","кот","пес","мир","сон","лук","сыр","нос","шар",
"стол","стул","окно","дверь","город","река","гора","поле","ветер","дождь",
"снег","лето","зима","осень","весна","ночь","день","утро","вечер","звезда",
"луна","солнце","небо","море","берег","волна","путь","след","камень","песок",
"огонь","дым","пламя","тень","свет","цвет","трава","листья","ветка","корень",
"яблоко","груша","слива","вишня","арбуз","дыня","хлеб","масло","молоко","сырник",
"каша","суп","борщ","пирог","торт","мед","сахар","соль","перец","чай",
"кофе","вода","сок","компот","квас","лимон","апельсин","банан","ананас","орех",
"шоколад","конфета","печенье","пряник","вафля","мармелад","зефир","мороженое","йогурт","кефир",
"курица","мясо","рыба","яйцо","котлета","сосиска","колбаса","бекон","ветчина","фарш",
"тарелка","ложка","вилка","нож","чашка","кружка","кастрюля","сковорода","чайник","плита",
"книга","тетрадь","ручка","карандаш","линейка","альбом","бумага","листок","страница","обложка",
"школа","класс","урок","учитель","ученик","знание","задача","пример","ответ","вопрос",
"работа","дело","задача","проект","офис","столик","кабинет","здание","лифт","коридор",
"машина","дорога","улица","переход","светофор","трасса","мост","тоннель","парковка","гараж",
"автобус","трамвай","метро","поезд","вагон","локомотив","самолет","аэропорт","рейс","пилот",
"корабль","лодка","катер","парус","якорь","порт","причал","штурвал","капитан","матрос",
"телефон","экран","кнопка","мышь","клавиатура","ноутбук","компьютер","программа","файл","папка",
"сервер","данные","система","алгоритм","код","язык","переменная","функция","класс","объект",
"ошибка","логика","цикл","условие","модуль","библиотека","скрипт","запуск","отладка","версия",
"интернет","сайт","страница","браузер","ссылка","домен","сертификат","пароль","логин","аккаунт",
"безопасность","шифр","ключ","доступ","права","роль","профиль","настройка","параметр","опция",
"игра","уровень","миссия","задача","герой","враг","босс","награда","опыт","очки",
"карта","локация","оружие","щит","магия","зелье","артефакт","квест","диалог","сюжет",
"музыка","песня","звук","ритм","мелодия","аккорд","гитара","пианино","скрипка","барабан",
"фильм","кадр","сюжет","актер","роль","сцена","камера","монтаж","премьера","экран",
"театр","спектакль","занавес","сцена","аплодисменты","балет","опера","ария","оркестр","дирижер",
"спорт","игрок","команда","матч","гол","победа","поражение","турнир","лига","чемпион",
"мяч","поле","ворота","тренер","судья","форма","разминка","стадион","трибуна","финал",
"бег","прыжок","плавание","борьба","удар","рывок","финиш","старт","рекорд","медаль",
"здоровье","сила","выносливость","энергия","сон","дыхание","пульс","мышца","кость","сустав",
"врач","пациент","лечение","диагноз","лекарство","таблетка","укол","процедура","палата","больница",
"семья","мать","отец","брат","сестра","дедушка","бабушка","родственник","ребенок","родитель",
"друг","подруга","знакомый","сосед","коллега","партнер","команда","лидер","группа","сообщество"
]
    return random.choice(words).upper()

def display_hangman(tries):
    stages = [  # финальное состояние: голова, торс, обе руки, обе ноги
                '''
                   --------
                   |      |
                   |      O
                   |     \\|/
                   |      |
                   |     / \\
                   -
                ''',
                # голова, торс, обе руки, одна нога
                '''
                   --------
                   |      |
                   |      O
                   |     \\|/
                   |      |
                   |     / 
                   -
                ''',
                # голова, торс, обе руки
                '''
                   --------
                   |      |
                   |      O
                   |     \\|/
                   |      |
                   |      
                   -
                ''',
                # голова, торс и одна рука
                '''
                   --------
                   |      |
                   |      O
                   |     \\|
                   |      |
                   |     
                   -
                ''',
                # голова и торс
                '''
                   --------
                   |      |
                   |      O
                   |      |
                   |      |
                   |     
                   -
                ''',
                # голова
                '''
                   --------
                   |      |
                   |      O
                   |    
                   |      
                   |     
                   -
                ''',
                # начальное состояние
                '''
                   --------
                   |      |
                   |      
                   |    
                   |      
                   |     
                   -
                '''
    ]
    return stages[tries]

if __name__ == "__main__":
    main()